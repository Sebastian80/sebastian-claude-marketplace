#!/usr/bin/env bash
# Serena CLI - Unified semantic code navigation
# Uses local venv with httpx for connection pooling

SCRIPT_DIR="$(dirname "$(realpath "$0")")"
VENV_PYTHON="$SCRIPT_DIR/.venv/bin/python"

# Check venv exists
if [[ ! -x "$VENV_PYTHON" ]]; then
    echo "Error: venv not found. Run: cd $SCRIPT_DIR && uv venv && uv pip install httpx typer rich" >&2
    exit 1
fi

# Add scripts dir to Python path so serena_cli package is found
export PYTHONPATH="$SCRIPT_DIR:$PYTHONPATH"

exec "$VENV_PYTHON" -m serena_cli "$@"
